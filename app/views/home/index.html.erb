<html>
<head>
  <meta charset="UTF-8">
  <title>MoneyTrack - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <%= csrf_meta_tags %>
  <%= stylesheet_link_tag 'homestyle', media: 'all' %>
</head>
<body>
<header class="header">
  <div class="auth-buttons">
    <%= link_to "–í–æ–π—Ç–∏", login_path, class: "auth-button login-btn" %>
    <%= link_to "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è", register_path, class: "auth-button register-btn" %>
  </div>
  <h1>MoneyTrack</h1>
  <p>–í–∞—à –ª–∏—á–Ω—ã–π —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –ø–æ–º–æ—â–Ω–∏–∫</p>
</header>

<section class="finance-section">
  <div class="account-card">
    <h2>–ö–æ–ø–∏–ª–∫–∞</h2>
    <div class="balance">75,000 ‚ÇΩ</div>
    <div class="account-info">
      <p>–¶–µ–ª—å: 100,000 ‚ÇΩ</p>
      <div class="progress-bar">
        <div class="progress"></div>
      </div>
      <p>–ü—Ä–æ–≥—Ä–µ—Å—Å: 75%</p>
    </div>
    <div class="account-info">
      <p>–ï–∂–µ–º–µ—Å—è—á–Ω—ã–π –≤–∑–Ω–æ—Å: 5,000 ‚ÇΩ</p>
    </div>
    <button class="account-button">–î–æ–±–∞–≤–∏—Ç—å</button>
  </div>

  <div class="expense-tracker">
    <h2>–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤</h2>
    <div class="expense-form">
      <input type="number" id="expense-amount" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É —Ä–∞—Å—Ö–æ–¥–∞" min="0" step="0.01">
      <input type="text" id="expense-description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–∞">
      <button onclick="addExpense()">–î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥</button>
    </div>
    <canvas id="expense-chart"></canvas>
  </div>

  <div class="account-card">
    <h2>–û—Å–Ω–æ–≤–Ω–æ–π —Å—á–µ—Ç</h2>
    <div class="balance">150,000 ‚ÇΩ</div>
    <div class="account-info">
      <p>–î–æ—Å—Ç—É–ø–Ω–æ: 145,000 ‚ÇΩ</p>
      <p>–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ: 5,000 ‚ÇΩ</p>
    </div>
    <div class="account-info">
      <p>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:</p>
      <p>–ü—Ä–æ–¥—É–∫—Ç—ã -2,500 ‚ÇΩ</p>
      <p>–ö–∞—Ñ–µ -800 ‚ÇΩ</p>
      <p>–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç -100 ‚ÇΩ</p>
    </div>
    <%= link_to "–ü–æ–ø–æ–ª–Ω–∏—Ç—å", login_path, class: "account-button" %>
  </div>
</section>

<div class="container">
  <div class="card">
    <h2>–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Å–æ–≤–µ—Ç—ã</h2>
    <div class="tip">
      <h3>üéØ –ü—Ä–∞–≤–∏–ª–æ 50/30/20</h3>
      <p>50% –¥–æ—Ö–æ–¥–∞ –Ω–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–∞—Å—Ö–æ–¥—ã, 30% –Ω–∞ –∂–µ–ª–∞–Ω–∏—è, 20% –Ω–∞ —Å–±–µ—Ä–µ–∂–µ–Ω–∏—è</p>
    </div>
    <div class="tip">
      <h3>üí∞ –ü–æ–¥—É—à–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</h3>
      <p>–°–æ–∑–¥–∞–π—Ç–µ –∑–∞–ø–∞—Å –¥–µ–Ω–µ–≥ –Ω–∞ 3-6 –º–µ—Å—è—Ü–µ–≤ –∂–∏–∑–Ω–∏</p>
    </div>
    <div class="tip">
      <h3>üìà –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏</h3>
      <p>–ù–∞—á–Ω–∏—Ç–µ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–∂–µ –Ω–µ–±–æ–ª—å—à–∏–µ —Å—É–º–º—ã —Ä–µ–≥—É–ª—è—Ä–Ω–æ</p>
    </div>
  </div>

  <div class="card">
    <h2>–ö—É—Ä—Å—ã –≤–∞–ª—é—Ç</h2>
    <div class="currency-item">
      <span>USD/RUB</span>
      <span class="up">91.45 ‚ÇΩ (+0.2%)</span>
    </div>
    <div class="currency-item">
      <span>EUR/RUB</span>
      <span class="down">98.32 ‚ÇΩ (-0.1%)</span>
    </div>
    <div class="currency-item">
      <span>CNY/RUB</span>
      <span class="up">12.67 ‚ÇΩ (+0.3%)</span>
    </div>
  </div>

  <div class="card">
    <h2>–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∞–∫—Ü–∏–∏</h2>
    <div class="stock-item">
      <span>–°–±–µ—Ä–±–∞–Ω–∫</span>
      <span class="up">270.45 ‚ÇΩ (+1.2%)</span>
    </div>
    <div class="stock-item">
      <span>–ì–∞–∑–ø—Ä–æ–º</span>
      <span class="down">165.32 ‚ÇΩ (-0.5%)</span>
    </div>
    <div class="stock-item">
      <span>–Ø–Ω–¥–µ–∫—Å</span>
      <span class="up">2750.80 ‚ÇΩ (+2.1%)</span>
    </div>
  </div>
</div>

<footer class="footer">
  <div class="footer-content">
    <div class="footer-section">
      <h3>–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
      <p>üìç –ú–æ—Å–∫–≤–∞, —É–ª. –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è, 123</p>
      <p>üìû 8 (800) 123-45-67</p>
      <p>üìß support@moneytrack.ru</p>
    </div>
    <div class="footer-section">
      <h3>–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã</h3>
      <p>–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ - –ü—è—Ç–Ω–∏—Ü–∞: 9:00 - 20:00</p>
      <p>–°—É–±–±–æ—Ç–∞: 10:00 - 17:00</p>
      <p>–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ: –≤—ã—Ö–æ–¥–Ω–æ–π</p>
    </div>
    <div class="footer-section">
      <h3>–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏</h3>
      <div class="social-links">
        <a href="https://vk.com/moneytrack">VK</a>
        <a href="https://t.me/moneytrack">Telegram</a>
        <a href="https://www.youtube.com/moneytrack">YouTube</a>
      </div>
    </div>
  </div>
  <div class="footer-bottom">
    <p>¬© 2024 MoneyTrack. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
  </div>
</footer>

<script>
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
    function updateFinancialData() {
        console.log('–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö...');
    }

    function highlightNewData(element) {
        element.classList.add('highlight');
        setTimeout(() => {
            element.classList.remove('highlight');
        }, 2000);
    }

    setInterval(updateFinancialData, 300000);

    document.querySelectorAll('.card').forEach(card => {
        card.addEventListener('click', function() {
            this.style.transform = 'scale(1.02)';
            setTimeout(() => {
                this.style.transform = 'scale(1)';
            }, 200);
        });
    });

    const tips = [
        "–í–µ–¥–∏—Ç–µ —É—á–µ—Ç –≤—Å–µ—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤",
        "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫—ç—à–±—ç–∫-—Å–µ—Ä–≤–∏—Å—ã",
        "–ü–ª–∞–Ω–∏—Ä—É–π—Ç–µ –∫—Ä—É–ø–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏ –∑–∞—Ä–∞–Ω–µ–µ"
    ];

    function addNewTip() {
        const tipsContainer = document.querySelector('.card:first-child');
        const randomTip = tips[Math.floor(Math.random() * tips.length)];
        const tipElement = document.createElement('div');
        tipElement.className = 'tip';
        tipElement.innerHTML = `
            <h3>üí° –°–æ–≤–µ—Ç –¥–Ω—è</h3>
            <p>${randomTip}</p>
        `;
        tipsContainer.appendChild(tipElement);
        highlightNewData(tipElement);
    }

    setInterval(addNewTip, 3600000);

    let expenseChart;
    const expenses = {
        labels: [],
        data: []
    };

    function initChart() {
        const ctx = document.getElementById('expense-chart').getContext('2d');
        expenseChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: expenses.labels,
                datasets: [{
                    label: '–†–∞—Å—Ö–æ–¥—ã',
                    data: expenses.data,
                    borderColor: '#408945',
                    backgroundColor: 'rgba(64, 137, 69, 0.1)',
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: '–°—É–º–º–∞ (‚ÇΩ)'
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: '–í—Ä–µ–º—è'
                        }
                    }
                }
            }
        });
    }

    function addExpense() {
        const amount = parseFloat(document.getElementById('expense-amount').value);
        const description = document.getElementById('expense-description').value;

        if (amount && description) {
            const now = new Date();
            const timeLabel = `${now.getHours()}:${String(now.getMinutes()).padStart(2, '0')}`;

            expenses.labels.push(timeLabel);
            expenses.data.push(amount);

            if (!expenseChart) {
                initChart();
            } else {
                expenseChart.data.labels = expenses.labels;
                expenseChart.data.datasets[0].data = expenses.data;
                expenseChart.update();
            }

            document.getElementById('expense-amount').value = '';
            document.getElementById('expense-description').value = '';
        }
    }

    document.addEventListener('DOMContentLoaded', initChart);

    document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('.account-button').forEach(button => {
            button.addEventListener('click', function() {
                console.log('Button clicked:', this.textContent);
                this.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    this.style.transform = 'scale(1)';
                }, 200);
            });
        });
    });
</script>
</body>
</html>
