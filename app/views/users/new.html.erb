<html>
<head>
  <meta charset="UTF-8">
  <title>MoneyTrack - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</title>
  <%= csrf_meta_tags %>
  <%= stylesheet_link_tag 'registration', media: 'all' %>
</head>
<body>
<header class="header">
  <h1>MoneyTrack</h1>
  <p>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞</p>
</header>

<main class="registration-container">
  <%= form_with model: @user, url: users_path, local: true, id: "registration-form", onsubmit: "return validateForm(event)" do |f| %>
    <div class="form-group">
      <label for="fullname">–ü–æ–ª–Ω–æ–µ –∏–º—è</label>
      <%= f.text_field :full_name, id: "fullname", required: true %>
      <div class="error-message" id="fullname-error">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –ø–æ–ª–Ω–æ–µ –∏–º—è</div>
    </div>

    <div class="form-group">
      <label for="email">Email</label>
      <%= f.email_field :email, id: "email", required: true %>
      <div class="error-message" id="email-error">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email</div>
    </div>

    <div class="form-group">
      <label for="phone">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
      <%= f.telephone_field :phone, id: "phone", required: true %>
      <div class="error-message" id="phone-error">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</div>
    </div>

    <div class="form-group">
      <label for="password">–ü–∞—Ä–æ–ª—å</label>
      <%= f.password_field :password, id: "password", required: true %>
      <div class="password-requirements">
        –ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤, –≤–∫–ª—é—á–∞—è –±—É–∫–≤—ã –∏ —Ü–∏—Ñ—Ä—ã
      </div>
      <div class="error-message" id="password-error">–ü–∞—Ä–æ–ª—å –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º</div>
    </div>

    <div class="form-group">
      <label for="confirm-password">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</label>
      <%= f.password_field :password_confirmation, id: "confirm-password", required: true %>
      <div class="error-message" id="confirm-password-error">–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç</div>
    </div>

    <button type="submit" class="submit-button">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>


    <div class="login-link">
      –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a>–í–æ–π—Ç–∏</a>
    </div>
  <% end %>
</main>

<footer class="footer">
  <div class="footer-content">
    <div class="footer-section">
      <h3>–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
      <p>üìç –ú–æ—Å–∫–≤–∞, —É–ª. –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è, 123</p>
      <p>üìû 8 (800) 123-45-67</p>
      <p>üìß support@moneytrack.ru</p>
    </div>
    <div class="footer-section">
      <h3>–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã</h3>
      <p>–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ - –ü—è—Ç–Ω–∏—Ü–∞: 9:00 - 20:00</p>
      <p>–°—É–±–±–æ—Ç–∞: 10:00 - 17:00</p>
      <p>–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ: –≤—ã—Ö–æ–¥–Ω–æ–π</p>
    </div>
    <div class="footer-section">
      <h3>–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏</h3>
      <div class="social-links">
        <a href="https://vk.com/moneytrack">VK</a>
        <a href="https://t.me/moneytrack">Telegram</a>
        <a href="https://www.youtube.com/moneytrack">YouTube</a>
      </div>
    </div>
  </div>
  <div class="footer-bottom">
    <p>¬© 2024 MoneyTrack. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
  </div>
</footer>

<script>
    function validateForm(event) {
        // –í–∞—à —Å–∫—Ä–∏–ø—Ç –∏–∑ HTML, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥ —Ç–æ, —á—Ç–æ —Ñ–æ—Ä–º–∞ —Ç–µ–ø–µ—Ä—å —Å–∞–±–º–∏—Ç–∏—Ç—Å—è —á–µ—Ä–µ–∑ Rails
        event.preventDefault();

        let isValid = true;
        const password = document.getElementById('password').value;
        const confirmPassword = document.getElementById('confirm-password').value;

        // Reset all error messages
        document.querySelectorAll('.error-message').forEach(error => {
            error.style.display = 'none';
        });

        // Validate full name
        const fullname = document.getElementById('fullname').value;
        if (fullname.trim().length < 2) {
            document.getElementById('fullname-error').style.display = 'block';
            isValid = false;
        }

        // Validate email
        const email = document.getElementById('email').value;
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            document.getElementById('email-error').style.display = 'block';
            isValid = false;
        }

        // Validate phone
        const phone = document.getElementById('phone').value;
        const phoneRegex = /^\+?[0-9]{10,15}$/;
        if (!phoneRegex.test(phone)) {
            document.getElementById('phone-error').style.display = 'block';
            isValid = false;
        }

        // Validate password
        if (password.length < 8 || !/[A-Za-z]/.test(password) || !/[0-9]/.test(password)) {
            document.getElementById('password-error').style.display = 'block';
            isValid = false;
        }

        // Validate password confirmation
        if (password !== confirmPassword) {
            document.getElementById('confirm-password-error').style.display = 'block';
            isValid = false;
        }

        if (isValid) {
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ñ–æ—Ä–º—É, –µ—Å–ª–∏ –ø—Ä–æ—à–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è
            event.target.submit();
        }

        return false;
    }

    // Add input masking for phone number
    document.getElementById('phone').addEventListener('input', function(e) {
        let x = e.target.value.replace(/\D/g, '').match(/(\d{0,3})(\d{0,3})(\d{0,4})/);
        e.target.value = !x[2] ? x[1] : '(' + x[1] + ') ' + x[2] + (x[3] ? '-' + x[3] : '');
    });
</script>
</body>
</html>